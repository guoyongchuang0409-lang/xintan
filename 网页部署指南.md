# ğŸŒ å®Œå…¨ç½‘é¡µéƒ¨ç½²æŒ‡å—

## ğŸ¯ ç›®æ ‡

å®Œå…¨åœ¨ç½‘é¡µä¸Šå®Œæˆéƒ¨ç½²ï¼Œä¸ä½¿ç”¨å‘½ä»¤è¡Œã€‚

---

## ğŸ“‹ ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡åç«¯æ–‡ä»¶

### éœ€è¦ä¸Šä¼ çš„æ–‡ä»¶

å°† `backend/vercel` æ–‡ä»¶å¤¹ä¸­çš„ä»¥ä¸‹æ–‡ä»¶å‡†å¤‡å¥½ï¼š

```
backend/vercel/
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ reports.js
â”‚   â””â”€â”€ stats.js
â”œâ”€â”€ package.json
â”œâ”€â”€ vercel.json
â”œâ”€â”€ .gitignore
â””â”€â”€ .vercelignore
```

---

## ğŸ“‹ ç¬¬äºŒæ­¥ï¼šåˆ›å»º GitHub ä»“åº“

### 1. è®¿é—® GitHub

è®¿é—®ï¼šhttps://github.com/new

### 2. åˆ›å»ºä»“åº“

- **Repository name**: `quiz-backend`
- **Description**: å¿ƒæ¢æµ‹è¯•åç«¯ API
- **Public** æˆ– **Private**ï¼ˆéƒ½å¯ä»¥ï¼‰
- **ä¸è¦**å‹¾é€‰ä»»ä½•é€‰é¡¹ï¼ˆä¿æŒç©ºä»“åº“ï¼‰
- ç‚¹å‡» **"Create repository"**

### 3. ä¸Šä¼ æ–‡ä»¶

åœ¨æ–°ä»“åº“é¡µé¢ï¼š

1. ç‚¹å‡» **"uploading an existing file"** é“¾æ¥
2. å°†ä»¥ä¸‹æ–‡ä»¶æ‹–æ‹½åˆ°ä¸Šä¼ åŒºåŸŸï¼š
   - æ•´ä¸ª `api` æ–‡ä»¶å¤¹ï¼ˆåŒ…å« reports.js å’Œ stats.jsï¼‰
   - `package.json`
   - `vercel.json`
   - `.gitignore`
   - `.vercelignore`
3. åœ¨åº•éƒ¨å¡«å†™ï¼š`Initial commit`
4. ç‚¹å‡» **"Commit changes"**

**é‡è¦æç¤º**ï¼šç¡®ä¿æ–‡ä»¶ç»“æ„æ­£ç¡®ï¼Œ`api` æ–‡ä»¶å¤¹åº”è¯¥åœ¨æ ¹ç›®å½•ã€‚

---

## ğŸ“‹ ç¬¬ä¸‰æ­¥ï¼šè¿æ¥ Vercel

### 1. æ³¨å†Œ/ç™»å½• Vercel

1. è®¿é—®ï¼šhttps://vercel.com/signup
2. **é‡è¦ï¼ç‚¹å‡» "Continue with GitHub"**ï¼ˆå¿…é¡»ç”¨ GitHub ç™»å½•ï¼‰
3. æˆæƒ Vercel è®¿é—®ä½ çš„ GitHub è´¦å·

### 2. å¯¼å…¥é¡¹ç›®

1. ç™»å½•åï¼Œç‚¹å‡» **"Add New..."** â†’ **"Project"**
2. åœ¨ "Import Git Repository" éƒ¨åˆ†æ‰¾åˆ° `quiz-backend`
3. ç‚¹å‡» **"Import"**

### 3. é…ç½®é¡¹ç›®

- **Project Name**: ä¿æŒé»˜è®¤æˆ–ä¿®æ”¹
- **Framework Preset**: é€‰æ‹© **"Other"**
- **Root Directory**: ä¿æŒ `./`
- **Build and Output Settings**: ä¿æŒé»˜è®¤
- ç‚¹å‡» **"Deploy"**

### 4. ç­‰å¾…éƒ¨ç½²

- ç­‰å¾… 30-60 ç§’
- çœ‹åˆ° ğŸ‰ è¡¨ç¤ºæˆåŠŸ
- **å¤åˆ¶å¹¶ä¿å­˜ä½ çš„ API åœ°å€**ï¼Œä¾‹å¦‚ï¼š
  ```
  https://quiz-backend-abc123.vercel.app
  ```

---

## ğŸ“‹ ç¬¬å››æ­¥ï¼šåˆ›å»ºæ•°æ®åº“

### 1. è¿›å…¥ Storage

1. åœ¨ Vercel Dashboardï¼Œç‚¹å‡»ä½ çš„é¡¹ç›®ï¼ˆquiz-backendï¼‰
2. ç‚¹å‡»é¡¶éƒ¨çš„ **"Storage"** æ ‡ç­¾
3. ç‚¹å‡» **"Create Database"**

### 2. é€‰æ‹© Postgres

1. ç‚¹å‡» **"Postgres"** å¡ç‰‡
2. å¡«å†™ä¿¡æ¯ï¼š
   - **Database Name**: `quiz_db`
   - **Region**: é€‰æ‹© **"Singapore (sin1)"** æˆ– **"Hong Kong (hkg1)"**
3. ç‚¹å‡» **"Create"**

### 3. è¿æ¥åˆ°é¡¹ç›®

1. æ•°æ®åº“åˆ›å»ºåï¼Œä¼šæç¤º **"Connect to Project"**
2. é€‰æ‹©ä½ çš„é¡¹ç›®ï¼š`quiz-backend`
3. ç‚¹å‡» **"Connect"**
4. âœ… å®Œæˆï¼ç¯å¢ƒå˜é‡è‡ªåŠ¨é…ç½®

---

## ğŸ“‹ ç¬¬äº”æ­¥ï¼šåˆå§‹åŒ–æ•°æ®åº“

### 1. æ‰“å¼€ Query ç•Œé¢

1. åœ¨ Storage é¡µé¢ï¼Œç‚¹å‡»ä½ çš„æ•°æ®åº“ï¼ˆquiz_dbï¼‰
2. ç‚¹å‡»é¡¶éƒ¨çš„ **"Query"** æ ‡ç­¾

### 2. æ‰§è¡Œ SQL

å¤åˆ¶ä»¥ä¸‹ SQLï¼Œç²˜è´´åˆ°æŸ¥è¯¢æ¡†ï¼š

```sql
CREATE TABLE IF NOT EXISTS reports (
    id SERIAL PRIMARY KEY,
    share_code VARCHAR(10) NOT NULL UNIQUE,
    quiz_type_id VARCHAR(50) NOT NULL,
    quiz_type_name VARCHAR(100) NOT NULL,
    report_data JSONB NOT NULL,
    created_at TIMESTAMP NOT NULL DEFAULT NOW(),
    updated_at TIMESTAMP,
    last_viewed_at TIMESTAMP,
    view_count INTEGER DEFAULT 0,
    ip_address VARCHAR(45),
    CONSTRAINT idx_share_code UNIQUE (share_code)
);

CREATE INDEX idx_quiz_type ON reports(quiz_type_id);
CREATE INDEX idx_created_at ON reports(created_at);
```

ç‚¹å‡» **"Run Query"** æŒ‰é’®ï¼Œçœ‹åˆ°ç»¿è‰² **"Success"** å³å¯ã€‚

---

## ğŸ“‹ ç¬¬å…­æ­¥ï¼šæµ‹è¯• API

### åœ¨æµè§ˆå™¨ä¸­æµ‹è¯•

æ‰“å¼€æ–°æ ‡ç­¾é¡µï¼Œè®¿é—®ï¼š
```
https://quiz-backend-abc123.vercel.app/api/stats
```
ï¼ˆæ›¿æ¢ä¸ºä½ çš„ API åœ°å€ï¼‰

åº”è¯¥çœ‹åˆ°ï¼š
```json
{
  "success": true,
  "data": {
    "totalReports": 0,
    "todayReports": 0,
    "weekReports": 0,
    "totalViews": 0,
    "byType": []
  }
}
```

âœ… å¦‚æœçœ‹åˆ°è¿™ä¸ªï¼Œè¯´æ˜åç«¯éƒ¨ç½²æˆåŠŸï¼

---

## ğŸ“‹ ç¬¬ä¸ƒæ­¥ï¼šé…ç½® Flutter åº”ç”¨

### 1. ä¿®æ”¹é…ç½®æ–‡ä»¶

æ‰“å¼€æ–‡ä»¶ï¼š`lib/core/services/database_service.dart`

æ‰¾åˆ°ç¬¬ 12 è¡Œï¼š
```dart
static const String _apiBaseUrl = 'YOUR_VERCEL_API_URL';
```

æ›¿æ¢ä¸ºä½ çš„ API åœ°å€ï¼š
```dart
static const String _apiBaseUrl = 'https://quiz-backend-abc123.vercel.app';
```

**ä¿å­˜æ–‡ä»¶**

### 2. é‡æ–°æ„å»ºåº”ç”¨

è¿™ä¸€æ­¥éœ€è¦ Flutter ç¯å¢ƒã€‚å¦‚æœä½ æ²¡æœ‰ï¼Œå¯ä»¥ï¼š

**é€‰é¡¹ A**ï¼šè¯·æœ‹å‹å¸®å¿™è¿è¡Œ `flutter build web --release`

**é€‰é¡¹ B**ï¼šä½¿ç”¨ GitHub Codespacesï¼ˆåœ¨çº¿ IDEï¼‰
1. å°†é¡¹ç›®ä¸Šä¼ åˆ° GitHub
2. æ‰“å¼€ Codespaces
3. åœ¨ç»ˆç«¯è¿è¡Œ `flutter build web --release`

**é€‰é¡¹ C**ï¼šæš‚æ—¶è·³è¿‡ï¼Œå…ˆæµ‹è¯•åç«¯åŠŸèƒ½

---

## ğŸ“‹ ç¬¬å…«æ­¥ï¼šéƒ¨ç½²åˆ° Netlify

### 1. è®¿é—® Netlify

1. è®¿é—®ï¼šhttps://app.netlify.com/
2. ç™»å½•ä½ çš„è´¦å·

### 2. æ›´æ–°ç½‘ç«™

1. è¿›å…¥ä½ çš„ç½‘ç«™ï¼ˆxintanï¼‰
2. ç‚¹å‡» **"Deploys"** æ ‡ç­¾
3. æ‹–æ‹½ `build/web` æ–‡ä»¶å¤¹åˆ°ä¸Šä¼ åŒºåŸŸ
4. ç­‰å¾…éƒ¨ç½²å®Œæˆ

---

## ğŸ‰ å®Œæˆï¼

ç°åœ¨æµ‹è¯•ä¸€ä¸‹ï¼š

1. è®¿é—® https://xintan.netlify.app
2. å®Œæˆä¸€æ¬¡æµ‹è¯•
3. æŒ‰ F12 æ‰“å¼€æ§åˆ¶å°
4. æŸ¥çœ‹ Consoleï¼Œåº”è¯¥çœ‹åˆ°ï¼š
   ```
   ğŸš€ [è‡ªåŠ¨ä¸Šä¼ ] å¼€å§‹ä¸Šä¼ æµ‹è¯•ç»“æœ...
   âœ… [è‡ªåŠ¨ä¸Šä¼ ] ä¸Šä¼ æˆåŠŸï¼
   ```

---

## ğŸ“Š æ£€æŸ¥æ•°æ®

### æ–¹å¼ 1ï¼šé€šè¿‡ API

è®¿é—®ï¼š`https://quiz-backend-abc123.vercel.app/api/stats`

åº”è¯¥çœ‹åˆ° `totalReports` å¢åŠ äº†ã€‚

### æ–¹å¼ 2ï¼šé€šè¿‡æ•°æ®åº“

1. åœ¨ Vercel çš„æ•°æ®åº“é¡µé¢
2. ç‚¹å‡» "Query"
3. æ‰§è¡Œï¼š`SELECT * FROM reports;`
4. å¯ä»¥çœ‹åˆ°æ‰€æœ‰ä¸Šä¼ çš„æ•°æ®

---

## ğŸ”„ åç»­æ›´æ–°

### æ›´æ–°åç«¯ä»£ç 

1. ä¿®æ”¹æœ¬åœ°æ–‡ä»¶
2. åœ¨ GitHub ä»“åº“é¡µé¢ä¸Šä¼ æ–°æ–‡ä»¶ï¼ˆè¦†ç›–ï¼‰
3. Vercel è‡ªåŠ¨æ£€æµ‹å¹¶é‡æ–°éƒ¨ç½²

### æ›´æ–°å‰ç«¯ä»£ç 

1. ä¿®æ”¹ Flutter ä»£ç 
2. è¿è¡Œ `flutter build web --release`
3. ä¸Šä¼  `build/web` åˆ° Netlify

---

## â“ å¸¸è§é—®é¢˜

### Q: GitHub ä¸Šä¼ æ–‡ä»¶æ—¶ï¼Œæ–‡ä»¶å¤¹ç»“æ„ä¸å¯¹æ€ä¹ˆåŠï¼Ÿ

A: ç¡®ä¿ä¸Šä¼ æ—¶ä¿æŒä»¥ä¸‹ç»“æ„ï¼š
```
æ ¹ç›®å½•/
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ reports.js
â”‚   â””â”€â”€ stats.js
â”œâ”€â”€ package.json
â””â”€â”€ vercel.json
```

### Q: Vercel æ‰¾ä¸åˆ°æˆ‘çš„ GitHub ä»“åº“ï¼Ÿ

A: 
1. è®¿é—® https://vercel.com/account/integrations
2. ç‚¹å‡» GitHub çš„ "Configure"
3. ç¡®ä¿æˆæƒäº†æ­£ç¡®çš„ä»“åº“

### Q: API è¿”å› 500 é”™è¯¯ï¼Ÿ

A: 
1. ç¡®è®¤æ•°æ®åº“å·²åˆ›å»ºå¹¶è¿æ¥
2. ç¡®è®¤å·²æ‰§è¡Œåˆå§‹åŒ– SQL
3. åœ¨ Vercel é¡¹ç›®é¡µé¢æŸ¥çœ‹ "Functions" æ—¥å¿—

### Q: æ•°æ®åº“è¿æ¥å¤±è´¥ï¼Ÿ

A: 
1. ç¡®è®¤æ•°æ®åº“å·²è¿æ¥åˆ°é¡¹ç›®
2. åœ¨é¡¹ç›®è®¾ç½®ä¸­æŸ¥çœ‹ "Environment Variables"
3. åº”è¯¥èƒ½çœ‹åˆ° `POSTGRES_URL` ç­‰å˜é‡

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå‘Šè¯‰æˆ‘ï¼š
1. åœ¨å“ªä¸€æ­¥é‡åˆ°é—®é¢˜
2. å…·ä½“çš„é”™è¯¯ä¿¡æ¯
3. æˆªå›¾ï¼ˆå¦‚æœæœ‰ï¼‰

æˆ‘ä¼šå¸®ä½ è§£å†³ï¼

---

**ç¥ä½ éƒ¨ç½²é¡ºåˆ©ï¼** ğŸš€
